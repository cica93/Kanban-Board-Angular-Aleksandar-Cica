<p-dialog
  [(visible)]="visibleSidebar"
  (visibleChange)="visibleChange($event)"
  [blockScroll]="true"
  [focusOnShow]="false"
  [closeOnEscape]="true"
  [draggable]="true"
  styleClass="w-4 fixed top-0 right-0 m-0"
  [style]="{ height:'100vh'}"
>
  <ng-template pTemplate="header">
    <span class="font-semibold text-xl">{{initValue.id ? 'Edit':'Create'}} task</span>
  </ng-template>
  <form [formGroup]="form" class="flex flex-column gap-2">
    <label for="title">Title</label>
    <input
      [attr.id]="'title'"
      [pAutoFocus]="true"
      placeholder="Enter title"
      formControlName="title"
      styleClass="w-full"
      pInputText
      class="flex-auto"
    />
    <label for="description">Description</label>
    <input
      [attr.id]="'description'"
      placeholder="Enter description"
      formControlName="description"
      styleClass="w-full"
      pInputText
      class="flex-auto"
    />
    <label for="task-status">Task Status</label>
    <p-dropdown
      [attr.id]="'task-status'"
      [options]="taskStatuses"
      formControlName="taskStatus"
      placeholder="Select task status"
      class="w-full"
    >
      <ng-template let-status pTemplate="item">
            {{ status | replace : "_" : " " }}
      </ng-template>
      <ng-template let-status pTemplate="selectedItem">
            {{ status | replace : "_" : " " }}
      </ng-template>
    </p-dropdown>

    <label for="task-priority">Task priority</label>
    <p-dropdown
      [attr.id]="'task-priority'"
      [options]="taskPriority"
      formControlName="taskPriority"
      placeholder="Select task priority"
      class="w-full"
    >
     
  </p-dropdown>

    <label for="users">Users</label>
    <p-multiSelect
      [options]="(users$ | async) ?? []"
      optionLabel="fullName"
      optionValue="id"
      [attr.id]="'users'"
      formControlName="users"
      placeholder="Select users"
      styleClass="w-full"
    />
  </form>
  <div class="flex justify-content-end mt-3 gap-2">
    <p-button
      [tabindex]="-1"
      pRipple
      label="Cancel"
      severity="secondary"
      (click)="close()"
    />
    <p-button pRipple label="Save" severity="primary" (click)="save()" />
  </div>
</p-dialog>
